{"title":"Files exercises","markdown":{"headingText":"Files exercises","containsRefs":false,"markdown":"This exercise will look at two files. You will be assigned tasks requiring you to __read__ and __write__ files as well as index __data frames__.\n\nUse your __\"Exercises.R\"__ file, ensuring you are using code sections to separate the different exercises. Additionally, set your working directory to your main workshop directory.\n\nCreate a new directory called \"Chapter_8_files\" within your main workshop directory to download the files:\n\n```{r echo=FALSE}\nlibrary(downloadthis)\ndownload_link(\n  link=\"https://m-gemmell.github.io/R_for_everyone/downloads/bat_roosts.csv\",\n  button_label = \"Download bat_roosts.csv\",\n  button_type = \"danger\",\n  has_icon = TRUE,\n  icon = \"fa fa-save\",\n  self_contained = TRUE\n)\n```\n<br>\n```{r echo=FALSE}\nlibrary(downloadthis)\ndownload_link(\n  link=\"https://m-gemmell.github.io/R_for_everyone/downloads/UK_retail.tsv\",\n  button_label = \"Download UK_retail.tsv\",\n  button_type = \"danger\",\n  has_icon = TRUE,\n  icon = \"fa fa-save\",\n  self_contained = TRUE\n)\n```\n<br>\n\nAs the files we are going to __read__ are in a different directory to our working directory we will have to specify the directory along with the file names. For example, to read in the \"Liverpool_beaches.csv\" file from the main directory you could use the  following command.\n\n```{r eval=FALSE}\nliv_beaches_df <- read.csv(\"Chapter_7/Liverpool_beaches.csv\", row.names = 1)\n```\n\nEnsure you also __write__ any output to \"Chapter_8_files\".\n\n## Bats\n```{r, fig.align = 'center',out.width= '20%', echo=FALSE }\nknitr::include_graphics(path = \"figures/bat.png\", auto_pdf = TRUE)\n``` \n\nFirst we will look at the file __bat_roosts.csv__. This contains information on the max number of roosts for different Bat species in different UK regions. \n\nThe data is from: \"Bat Conservation Trust 2020. Roost Count peak counts summary data\". Available from https://www.bats.org.uk/our-work/national-bat-monitoring-programme/reports/nbmp-annual-report\n\nFor this file carry out the below tasks:\n\n1. __Read__ in the file \"bat_roosts.csv\" as a __data frame__ __variable__ called \"bat_df\". Ensure the row names contain the Regions (Channel Islands, East Midlands, etc.).\n2. Inspect the __variable__ and ensure there are only numerics within the __data frame__ with all strings only being in column and row names.\n3. Add a row to \"bat_df\" called \"UK\" that contains the totals for each Species.\n4. Add a column to \"bat_df\" called \"All_Bat_Species\" that contains the totals for each Region.\n5. Create a transposed __data frame__ of \"bat_df\" called \"bat_t_df\".\n6. __Write__ the __data frame__ \"bat_t_df\" to a comma separated file called \"bat_roosts_t.csv\". Ensure there are no quotes surrounding the row or column names.\n\nNow that you have carried that out, can you answer the following questions?\n\n1. Which region has no roosts?\n2. Which Bat species has the highest number of roosts across the UK?\n3. Which Bat species has the lowest number of roosts across the UK?\n\n## UK retail\n```{r, fig.align = 'center',out.width= '20%', echo=FALSE }\nknitr::include_graphics(path = \"figures/UKPounds.png\", auto_pdf = TRUE)\n``` \n\nNext we have the file __UK_retail.tsv__ containing UK retail information for each month from September 2017 to September 2020. The values are seasonally adjusted volume sales. The data comes from: https://www.ons.gov.uk/businessindustryandtrade/retailindustry/bulletins/retailsales/september2020.\n\nCarry out the below tasks:\n\n1. __Read__ in the file \"UK_retail.tsv\" as a __data frame__ __variable__ called \"uk_retail_df\". Ensure the row names contain the YearMonth info (2017SEP, 2017OCT, etc.).\n2. Create a __data frame__ called \"uk_retail_2020_df\" containing the rows for 2020 from \"uk_retail_df\". \n3. For each month in 2020 print out the phrase \"The Food retail index for \\<YearMonth> was \\<Food>\". For example the first phrase will be \"The Food retail index for 2020JAN was 101.9\". This can be done with one line of code using the `paste()` function.\n4. Make a total row and an average (mean) row for \"uk_retail_2020_df\". Ensure you are not including the total in the mean.\n5. Finally write out the __data frame__ \"uk_retail_2020_df\" as a tab separated file called \"UK_retail_2020.tsv\".\n\nNow that you have carried that out, can you answer the following questions?\n\n1. Which retail sectors have a lower average than their February 2020 value?\n2. Which retail sector was the highest for 2020?\n3. Which sector was the most stable?\n\nGreat! Have a look at the solutions and see how they compare to your code.\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"08-Files_exercises.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.340","editor":"source","theme":"cosmo","max-width":"3000px","toc-location":"left","toc-title":"In this chapter","margin":0,"page-layout":"full"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}